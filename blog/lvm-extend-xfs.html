<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LVM Extend Sonrası XFS Neden Büyümedi?</title>
  <meta name="description" content="Canlı sistemde LVM büyüttükten sonra XFS neden genişlemedi ve nasıl düzeltildi.">

  <meta property="og:title" content="LVM Extend Sonrası XFS Neden Büyümedi? Canlı Sistem Üzerinde Çözüm">
  <meta property="og:description" content="Production ortamda LVM ile disk alanını genişlettikten sonra mount edilmiş XFS büyümedi. Bu yazı sorunu, yanlış denenen yolları ve kesintisiz çözümü anlatıyor.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://emirhanbalci.com/blog/lvm-extend-xfs.html">
  <meta property="og:image" content="https://emirhanbalci.com/assets/og/default.png">
  <meta property="article:published_time" content="2025-04-15">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="stylesheet" href="../assets/css/main.css" />
</head>
<body>
  <header class="site-header">
    <nav class="nav">
      <a class="logo" href="/">Emirhan Talha BALCI</a>
      <ul class="nav-links">
        <li><a href="/blog/index.html">Blog</a></li>
        <li><a href="/projects/index.html">Projeler</a></li>
        <li><a href="/about.html">Hakkımda</a></li>
        <li><a href="/contact.html">İletişim</a></li>
      </ul>
      <button id="theme-toggle" class="theme-toggle" aria-label="Tema">🌓</button>
    </nav>
  </header>

  <main class="container">
    <article class="card">
      <header>
        <h1 class="section-title" style="font-size:1.4rem;">
          LVM Extend Sonrası XFS Neden Büyümedi? Canlı Sistem Üzerinde Çözüm
        </h1>

        <div class="meta-line">
          15 Nisan 2025 · 2025-04-15 · 7 dk okuma ·
          <span class="badge">Linux</span>
          <span class="badge">Storage</span>
        </div>

        <p class="post-desc">
          Production ortamda LVM ile disk alanını genişlettikten sonra mount edilmiş XFS büyümedi.
          Bu yazı sorunu, yanlış denenen yolları ve kesintisiz çözümü anlatıyor.
        </p>
      </header>

      <section style="margin-top:2rem;">
        <h2 class="section-title">1. Problem Senaryosu</h2>
        <p>
          VMware ortamında çalışan bir production sistemde <code>/data</code> partition'ı dolmaya başlamıştı.
          Servis kesintisi kabul edilemediği için unmount yapamıyorduk. LVM logical volume'ü genişlettim
          ancak <code>df -h</code> çıktısı değişmedi.
        </p>

        <pre style="background-color:var(--card-bg);border:1px solid var(--border);border-radius:6px;padding:1rem;overflow-x:auto;"><code>lvextend -L +100G /dev/vgdata/lvdata
xfs_growfs /data</code></pre>

        <p>
          İlk komut başarılı oldu ama XFS boyutu sabit kaldı. Hata mesajı yoktu ama genişleme olmamıştı.
        </p>

        <h2 class="section-title">2. Yanlış Yaklaşım</h2>
        <p>
          İlk düşüncem unmount edip tekrar mount etmekti. Ancak bu servisi durduracaktı.
          Sonra <code>xfs_repair</code> denedim ama bu da unmount gerektiriyordu. Ayrıca <code>xfs_repair</code>
          mount edilmiş sistemde çalışmaz ve veri kaybına neden olabilir.
        </p>

        <h2 class="section-title">3. Çalışan Çözüm</h2>
        <p>
          Asıl sorun logical volume'ün boyutu değiştirildiği halde filesystem'in bunu bilmemesiydi.
          <code>xfs_growfs</code> komutu mount point ile çalışır.
        </p>

        <p>Doğru komut:</p>

        <pre style="background-color:var(--card-bg);border:1px solid var(--border);border-radius:6px;padding:1rem;overflow-x:auto;"><code>xfs_growfs /data</code></pre>

        <p>
          Bu komut anlık olarak XFS'i genişletti. <code>df -h</code> çıktısı hemen güncellendi.
          Servis kesintisi olmadı.
        </p>

        <h2 class="section-title">4. Risk Notları</h2>
        <ul style="margin-left:1rem;font-size:.9rem;line-height:1.6;">
          <li>Canlıda filesystem büyütmek veri kaybı riski taşır. Snapshot almadan yapılmamalı.</li>
          <li><code>xfs_growfs</code> sadece büyütme yapar, küçültme desteklenmez.</li>
          <li>VMware tarafında disk genişletme yapıldıysa guest OS'de <code>pvresize</code> çalıştırılmalı.</li>
          <li>Production ortamda her zaman test senaryoları hazır olmalı.</li>
        </ul>

        <h2 class="section-title">5. Özet</h2>
        <p>
          LVM extend sonrası XFS büyümezse, <code>xfs_growfs</code> komutunu mount point ile çalıştırın.
          Canlı sistemde genişleme yapılabilir ancak risk analizi şart.
        </p>
      </section>

      <footer style="margin-top:2rem;display:flex;justify-content:space-between;font-size:.8rem;flex-wrap:wrap;gap:1rem;">
        <a href="index.html" style="color:var(--accent);text-decoration:none;">← Tüm yazılar</a>
        <span style="color:var(--muted);">Sonraki yazı yakında</span>
      </footer>
    </article>
  </main>

  <footer class="site-footer">
    <div class="footer-left">© 2025 Emirhan Talha BALCI</div>
    <div class="footer-mid">Kod GitHub'da açık</div>
    <div class="footer-right">
      <a href="https://github.com/Emirhanbalc" target="_blank" rel="noopener">GitHub</a> ·
      <a href="https://www.linkedin.com/in/emirhanbalc" target="_blank" rel="noopener">LinkedIn</a>
    </div>
  </footer>

  <script src="../assets/js/theme.js"></script>
</body>
</html>
